2025-10-22 13:32:59.086 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 13:32:59.139 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 16505 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 13:32:59.140 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 13:32:59.140 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 13:32:59.727 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 13:32:59.786 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 3 JPA repository interfaces.
2025-10-22 13:32:59.999 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 13:33:00.000 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:33:00.001 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:33:00.001 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:33:00.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:33:00.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 13:33:00.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 13:33:00.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:33:00.003 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:33:00.003 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:33:00.293 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 13:33:00.308 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 13:33:00.311 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 13:33:00.311 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 13:33:00.374 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 13:33:00.374 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1197 ms
2025-10-22 13:33:00.379 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 13:33:00.388 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 13:33:00.390 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 13:33:00.532 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 13:33:00.584 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 13:33:00.630 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 13:33:00.870 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 13:33:00.893 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 13:33:01.077 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 13:33:01.079 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 13:33:01.103 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 13:33:01.127 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 13:33:01.924 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 13:33:01.936 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:33:01.940 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:33:01.940 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:33:01.944 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 13:33:01.952 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 13:33:01.953 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 13:33:01.954 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 13:33:01.954 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 13:33:01.955 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 13:33:01.955 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 13:33:01.956 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (created_at timestamp(6) not null, expired_at timestamp(6), id bigint generated by default as identity, user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 13:33:01.958 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.created_at is '생성일'
2025-10-22 13:33:01.959 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 13:33:01.960 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 13:33:01.960 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 13:33:01.961 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 13:33:01.961 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 13:33:01.962 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 13:33:01.962 [main] DEBUG org.hibernate.SQL - create table tbl_user (id bigint generated by default as identity, api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 13:33:01.963 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 13:33:01.964 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 13:33:01.964 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 13:33:01.965 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 13:33:01.977 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 13:33:01.980 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:33:01.987 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 13:33:01.995 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 13:33:01.995 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 13:33:01.995 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 13:33:01.996 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 13:33:01.997 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 13:33:02.386 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 13:33:02.423 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 13:33:02.896 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 13:33:03.012 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 13:33:03.028 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 13:33:03.029 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 13:33:03.029 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 13:33:03.029 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 13:33:03.029 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 13:33:03.030 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:33:03.030 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:33:03.030 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 13:33:03.030 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:33:03.030 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:33:03.030 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 13:33:03.040 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.51 seconds (process running for 5.301)
2025-10-22 13:33:54.392 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 13:33:54.392 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 13:33:54.393 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 13:33:54.635 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:54.736 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,username,id) values (?,?,default)
2025-10-22 13:33:56.620 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:56.632 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:33:56.635 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:56.637 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:33:56.983 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:56.998 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:33:57.161 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:57.170 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:33:57.363 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:57.370 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:33:57.378 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from tbl_short_url where id=?
2025-10-22 13:33:57.611 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:33:57.786 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=? and u1_0.api_key=?
2025-10-22 13:33:57.796 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,username=? where id=?
2025-10-22 13:33:58.141 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:58.145 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:33:58.147 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:33:58.148 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:33:58.479 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:33:58.481 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=52ukLfno, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@78c2d46e]
2025-10-22 13:33:58.483 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:33:58.485 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 13:33:59.355 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 13:33:59.356 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:33:59.366 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id where su1_0.id=?
2025-10-22 13:33:59.708 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 13:33:59.709 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:34:00.413 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:34:00.515 [http-nio-8080-exec-3] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 13:34:00.515 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:34:00.521 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:41:44.687 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 13:41:44.691 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 13:41:44.695 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:41:44.695 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:41:44.697 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:41:44.697 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:41:44.700 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 13:41:44.701 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 13:41:49.947 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 13:41:49.998 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 17249 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 13:41:49.999 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 13:41:49.999 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 13:41:50.566 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 13:41:50.625 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 3 JPA repository interfaces.
2025-10-22 13:41:50.815 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 13:41:50.815 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:41:50.815 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:41:50.816 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:41:50.816 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:41:50.817 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 13:41:50.817 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 13:41:50.817 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:41:50.817 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:41:50.817 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:41:51.043 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 13:41:51.073 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 13:41:51.075 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 13:41:51.075 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 13:41:51.127 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 13:41:51.128 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1089 ms
2025-10-22 13:41:51.134 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 13:41:51.141 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 13:41:51.143 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 13:41:51.304 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 13:41:51.355 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 13:41:51.390 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 13:41:51.655 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 13:41:51.681 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 13:41:51.883 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 13:41:51.885 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 13:41:51.908 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 13:41:51.930 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 13:41:52.873 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 13:41:52.887 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:41:52.890 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:41:52.890 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:41:52.894 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 13:41:52.902 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 13:41:52.904 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 13:41:52.905 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 13:41:52.906 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 13:41:52.907 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 13:41:52.908 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 13:41:52.909 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (created_at timestamp(6) not null, expired_at timestamp(6), id bigint generated by default as identity, user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 13:41:52.911 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.created_at is '생성일'
2025-10-22 13:41:52.913 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 13:41:52.913 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 13:41:52.914 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 13:41:52.914 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 13:41:52.915 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 13:41:52.915 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 13:41:52.916 [main] DEBUG org.hibernate.SQL - create table tbl_user (id bigint generated by default as identity, api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 13:41:52.917 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 13:41:52.917 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 13:41:52.918 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 13:41:52.918 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 13:41:52.934 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 13:41:52.938 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:41:52.945 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 13:41:52.953 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 13:41:52.954 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 13:41:52.955 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 13:41:52.955 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 13:41:52.957 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 13:41:53.345 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 13:41:53.374 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 13:41:53.711 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 13:41:53.780 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 13:41:53.793 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 13:41:53.794 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:41:53.794 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:41:53.794 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 13:41:53.803 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.758 seconds (process running for 5.35)
2025-10-22 13:42:10.641 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 13:42:10.641 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 13:42:10.643 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 13:42:10.841 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:10.935 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,username,id) values (?,?,default)
2025-10-22 13:42:11.779 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:11.848 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:42:11.854 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:11.859 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:42:12.126 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:12.137 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:42:12.317 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:12.324 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:42:12.505 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:12.510 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:42:12.515 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from tbl_short_url where id=?
2025-10-22 13:42:12.684 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:42:12.930 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=? and u1_0.api_key=?
2025-10-22 13:42:12.937 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,username=? where id=?
2025-10-22 13:42:13.295 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:13.301 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:42:13.302 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:42:13.304 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:42:13.684 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:42:13.686 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=6iMT6Z76, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@171b0a9a]
2025-10-22 13:42:13.688 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:42:13.690 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 13:42:14.538 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 13:42:14.539 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:42:14.546 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id where su1_0.id=?
2025-10-22 13:42:14.826 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 13:42:14.826 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:42:15.804 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:42:15.946 [http-nio-8080-exec-3] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 13:42:15.947 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:42:15.954 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:42:21.270 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 13:42:21.273 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 13:42:21.278 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:42:21.279 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:42:21.280 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:42:21.281 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:42:21.283 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 13:42:21.285 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 13:42:32.004 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 13:42:32.050 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 17336 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 13:42:32.051 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 13:42:32.051 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 13:42:32.637 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 13:42:32.694 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 3 JPA repository interfaces.
2025-10-22 13:42:32.890 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 13:42:32.891 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:42:32.891 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:42:32.891 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:42:32.892 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:42:32.892 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 13:42:32.892 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 13:42:32.893 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:42:32.893 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:42:32.893 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 13:42:33.182 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 13:42:33.196 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 13:42:33.198 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 13:42:33.199 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 13:42:33.251 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 13:42:33.252 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1167 ms
2025-10-22 13:42:33.257 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 13:42:33.265 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 13:42:33.267 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 13:42:33.413 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 13:42:33.465 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 13:42:33.501 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 13:42:33.793 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 13:42:33.815 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 13:42:33.989 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 13:42:33.990 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 13:42:34.013 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 13:42:34.044 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 13:42:34.842 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 13:42:34.853 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:42:34.856 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:42:34.857 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:42:34.860 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 13:42:34.868 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 13:42:34.869 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 13:42:34.869 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 13:42:34.870 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 13:42:34.870 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 13:42:34.870 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 13:42:34.871 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (created_at timestamp(6) not null, expired_at timestamp(6), id bigint generated by default as identity, user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 13:42:34.873 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.created_at is '생성일'
2025-10-22 13:42:34.873 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 13:42:34.873 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 13:42:34.874 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 13:42:34.874 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 13:42:34.874 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 13:42:34.875 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 13:42:34.875 [main] DEBUG org.hibernate.SQL - create table tbl_user (id bigint generated by default as identity, api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 13:42:34.876 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 13:42:34.877 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 13:42:34.877 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 13:42:34.877 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 13:42:34.888 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 13:42:34.891 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:42:34.897 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 13:42:34.904 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 13:42:34.904 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 13:42:34.904 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 13:42:34.905 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 13:42:34.906 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 13:42:35.300 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 13:42:35.333 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 13:42:35.679 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 13:42:35.756 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 13:42:35.770 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 13:42:35.771 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 13:42:35.772 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 13:42:35.772 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 13:42:35.780 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.352 seconds (process running for 5.793)
2025-10-22 13:44:01.431 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 13:44:01.431 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 13:44:01.432 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 13:44:01.683 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:01.804 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,username,id) values (?,?,default)
2025-10-22 13:44:02.096 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:19.689 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=45s587ms).
2025-10-22 13:44:19.695 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:44:19.697 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:19.699 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:44:19.922 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:19.938 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:44:20.119 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:20.128 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:44:20.423 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:44:20.433 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:44:20.442 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from tbl_short_url where id=?
2025-10-22 13:44:20.604 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:44:20.862 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=? and u1_0.api_key=?
2025-10-22 13:44:20.872 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,username=? where id=?
2025-10-22 13:44:21.060 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:45:04.790 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=45s101ms).
2025-10-22 13:45:04.793 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where su1_0.short_url=? fetch first ? rows only
2025-10-22 13:45:04.796 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.username from tbl_user u1_0 where u1_0.username=?
2025-10-22 13:45:04.798 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,expired_at,long_url,short_url,user_id,id) values (?,?,?,?,?,?,default)
2025-10-22 13:45:04.994 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:45:04.996 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=4jFV5dRZ, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5fec92af]
2025-10-22 13:45:04.998 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.short_url=?
2025-10-22 13:45:05.000 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 13:45:06.183 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 13:45:06.184 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:45:06.192 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id where su1_0.id=?
2025-10-22 13:45:06.418 [http-nio-8080-exec-3] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 13:45:06.419 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:45:07.162 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:45:07.248 [http-nio-8080-exec-4] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 13:45:07.248 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=?
2025-10-22 13:45:07.254 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 13:52:29.605 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 13:52:29.610 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 13:52:29.615 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 13:52:29.615 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 13:52:29.617 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 13:52:29.618 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 13:52:29.621 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 13:52:29.623 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:38:28.981 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:38:29.057 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 25552 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:38:29.058 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:38:29.059 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:38:29.874 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:38:29.938 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 3 JPA repository interfaces.
2025-10-22 15:38:30.219 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:38:30.220 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:38:30.221 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:38:30.221 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:38:30.222 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:38:30.722 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:38:30.735 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:38:30.736 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:38:30.737 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:38:30.784 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:38:30.785 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1667 ms
2025-10-22 15:38:30.790 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:38:30.796 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:38:30.798 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:38:30.949 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:38:30.999 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:38:31.033 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:38:31.328 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:38:31.351 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:38:31.540 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:38:31.542 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:38:31.566 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:38:31.589 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:38:32.400 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:38:32.411 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:38:32.414 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:38:32.415 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:38:32.418 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:38:32.425 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:38:32.426 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:38:32.427 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:38:32.427 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:38:32.427 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:38:32.428 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:38:32.429 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:38:32.434 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:38:32.434 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:38:32.435 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:38:32.435 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:38:32.435 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:38:32.436 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:38:32.436 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:38:32.436 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:38:32.437 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:38:32.438 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:38:32.439 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:38:32.439 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:38:32.439 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:38:32.440 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:38:32.440 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:38:32.449 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:38:32.452 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:38:32.458 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:38:32.468 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:38:32.468 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:38:32.469 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:38:32.469 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:38:32.470 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:38:32.897 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:38:32.928 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:38:33.279 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:38:33.355 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:38:33.369 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:38:33.370 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:38:33.370 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:38:33.370 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:38:33.371 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:38:33.371 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:38:33.371 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:38:33.371 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:38:33.371 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:38:33.371 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:38:33.371 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:38:33.380 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 5.386 seconds (process running for 6.38)
2025-10-22 15:38:35.150 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 15:38:35.150 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 15:38:35.152 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-10-22 15:38:35.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:35.505 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 15:38:36.330 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:36.343 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:38:36.345 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:36.350 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:38:36.353 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23502, SQLState: 23502
2025-10-22 15:38:36.353 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - NULL not allowed for column "CREATED_AT"; SQL statement:
insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default) [23502-232]
2025-10-22 15:38:36.760 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:36.775 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:38:37.135 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:37.146 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:38:37.320 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:37.325 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:38:37.615 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:38:37.823 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:38:37.836 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 15:38:38.236 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:38.243 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:38:38.246 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:38:38.249 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:38:38.250 [http-nio-8080-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23502, SQLState: 23502
2025-10-22 15:38:38.250 [http-nio-8080-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - NULL not allowed for column "CREATED_AT"; SQL statement:
insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default) [23502-232]
2025-10-22 15:38:38.558 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:38:38.874 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 15:38:38.875 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:38:38.879 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getRedirectCount$0(RedirectionHistoryServiceImpl.java:39)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getRedirectCount(RedirectionHistoryServiceImpl.java:39)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.register(RedirectionHistoryController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:38:39.067 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 15:38:39.068 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:38:39.071 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getStats$1(RedirectionHistoryServiceImpl.java:49)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getStats(RedirectionHistoryServiceImpl.java:49)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.getStats(RedirectionHistoryController.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:38:39.323 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:38:39.323 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:38:39.325 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getStats$1(RedirectionHistoryServiceImpl.java:49)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getStats(RedirectionHistoryServiceImpl.java:49)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.getStats(RedirectionHistoryController.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:39:51.308 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 15:39:51.311 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 15:39:51.316 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:39:51.316 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:39:51.318 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:39:51.318 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:39:51.320 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 15:39:51.323 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:39:54.232 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:39:54.275 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 25697 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:39:54.275 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:39:54.276 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:39:54.807 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:39:54.863 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 3 JPA repository interfaces.
2025-10-22 15:39:55.065 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:39:55.066 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:39:55.067 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:39:55.067 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:39:55.068 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:39:55.467 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:39:55.478 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:39:55.480 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:39:55.480 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:39:55.526 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:39:55.526 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1218 ms
2025-10-22 15:39:55.531 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:39:55.538 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:39:55.539 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:39:55.677 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:39:55.729 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:39:55.767 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:39:56.058 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:39:56.080 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:39:56.288 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:39:56.290 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:39:56.319 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:39:56.347 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:39:57.186 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:39:57.200 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:39:57.204 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:39:57.204 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:39:57.208 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:39:57.216 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:39:57.218 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:39:57.218 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:39:57.219 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:39:57.220 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:39:57.220 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:39:57.221 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:39:57.227 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:39:57.228 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:39:57.228 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:39:57.228 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:39:57.229 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:39:57.229 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:39:57.230 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:39:57.230 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:39:57.231 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:39:57.232 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:39:57.233 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:39:57.233 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:39:57.233 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:39:57.234 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:39:57.234 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:39:57.245 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:39:57.249 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:39:57.256 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:39:57.265 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:39:57.265 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:39:57.266 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:39:57.266 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:39:57.267 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:39:57.702 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:39:57.736 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:39:58.083 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:39:58.159 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:39:58.181 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:39:58.183 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:39:58.183 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:39:58.183 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:39:58.192 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.445 seconds (process running for 5.404)
2025-10-22 15:40:06.177 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 15:40:06.178 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 15:40:06.179 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 15:40:06.416 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:06.586 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 15:40:06.892 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:29.803 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:40:31.656 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:44.078 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:40:44.090 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23502, SQLState: 23502
2025-10-22 15:40:44.091 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - NULL not allowed for column "CREATED_AT"; SQL statement:
insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default) [23502-232]
2025-10-22 15:40:51.164 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:51.177 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:40:51.451 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:51.462 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:40:51.628 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:51.633 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:40:51.803 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:40:51.986 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:40:51.999 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 15:40:52.205 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:55.377 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:40:55.379 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:40:55.380 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:40:55.381 [http-nio-8080-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23502, SQLState: 23502
2025-10-22 15:40:55.381 [http-nio-8080-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - NULL not allowed for column "CREATED_AT"; SQL statement:
insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default) [23502-232]
2025-10-22 15:40:55.574 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:40:55.758 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 15:40:55.759 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:40:55.764 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getRedirectCount$0(RedirectionHistoryServiceImpl.java:39)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getRedirectCount(RedirectionHistoryServiceImpl.java:39)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.register(RedirectionHistoryController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:40:55.913 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 15:40:55.914 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:40:55.916 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getStats$1(RedirectionHistoryServiceImpl.java:49)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getStats(RedirectionHistoryServiceImpl.java:49)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.getStats(RedirectionHistoryController.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:40:56.149 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:40:56.149 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:40:56.153 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: URL not found] with root cause
java.lang.IllegalArgumentException: URL not found
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.lambda$getStats$1(RedirectionHistoryServiceImpl.java:49)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.nh.shorturl.service.impl.history.RedirectionHistoryServiceImpl.getStats(RedirectionHistoryServiceImpl.java:49)
	at com.nh.shorturl.controller.history.RedirectionHistoryController.getStats(RedirectionHistoryController.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.nh.shorturl.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-22 15:43:16.240 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 15:43:16.246 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 15:43:16.251 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:43:16.252 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:43:16.253 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:43:16.254 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:43:16.257 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 15:43:16.259 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:43:22.496 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:43:22.556 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 25977 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:43:22.557 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:43:22.558 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:43:23.279 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:43:23.335 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 3 JPA repository interfaces.
2025-10-22 15:43:23.575 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:43:23.576 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:43:23.576 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:43:23.576 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:43:23.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:43:23.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:43:23.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:43:23.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:43:23.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:43:23.578 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:43:23.962 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:43:23.985 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:43:23.987 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:43:23.987 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:43:24.027 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:43:24.028 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1417 ms
2025-10-22 15:43:24.032 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:43:24.040 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:43:24.042 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:43:24.168 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:43:24.213 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:43:24.247 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:43:24.493 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:43:24.516 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:43:24.703 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:43:24.704 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:43:24.724 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:43:24.748 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:43:25.513 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:43:25.525 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:43:25.528 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:43:25.528 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:43:25.531 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:43:25.538 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:43:25.539 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:43:25.540 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:43:25.540 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:43:25.541 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:43:25.541 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:43:25.542 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:43:25.547 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:43:25.548 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:43:25.549 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:43:25.549 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:43:25.550 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:43:25.550 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:43:25.551 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:43:25.551 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:43:25.552 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:43:25.555 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:43:25.555 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:43:25.555 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:43:25.556 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:43:25.556 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:43:25.557 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:43:25.566 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:43:25.570 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:43:25.577 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:43:25.585 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:43:25.586 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:43:25.586 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:43:25.586 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:43:25.587 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:43:25.965 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:43:25.994 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:43:26.324 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:43:26.390 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:43:26.402 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:43:26.403 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:43:26.404 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:43:26.404 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:43:26.404 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:43:26.413 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.853 seconds (process running for 5.478)
2025-10-22 15:43:52.886 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 15:43:52.886 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 15:43:52.887 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 15:43:53.108 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:53.218 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 15:43:54.123 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:54.136 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:43:54.140 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:54.146 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:43:54.505 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:54.518 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:43:54.678 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:54.687 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:43:54.944 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:54.949 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:43:54.959 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - UPDATE TBL_SHORT_URL SET IS_DEL = 'Y', DELETED_AT = CURRENT_TIMESTAMP WHERE id = ?
2025-10-22 15:43:55.251 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:43:55.485 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:43:55.497 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 15:43:55.918 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:55.924 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:43:55.927 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:43:55.929 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:43:56.248 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:43:56.250 [http-nio-8080-exec-9] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=Oblki6Kj, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@72440e1e]
2025-10-22 15:43:56.252 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:43:56.254 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 15:43:57.449 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 15:43:57.450 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:43:57.462 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id and (su1_0.IS_DEL = 'N') where su1_0.id=?
2025-10-22 15:43:57.934 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 15:43:57.935 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:43:58.779 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:43:58.894 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:43:58.895 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:43:58.904 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:47:40.456 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 15:47:40.459 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 15:47:40.463 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:47:40.463 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:47:40.465 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:47:40.465 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:47:40.467 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 15:47:40.469 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:50:23.157 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:50:23.196 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 26519 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:50:23.197 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:50:23.198 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:50:23.742 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:50:23.796 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 3 JPA repository interfaces.
2025-10-22 15:50:23.974 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:50:23.974 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:50:23.974 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:50:23.975 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:50:23.975 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:50:23.976 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:50:23.976 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:50:23.976 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:50:23.976 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:50:23.976 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:50:24.381 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:50:24.392 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:50:24.394 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:50:24.394 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:50:24.438 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:50:24.438 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1209 ms
2025-10-22 15:50:24.443 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:50:24.450 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:50:24.452 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:50:24.586 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:50:24.640 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:50:24.678 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:50:24.964 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:50:24.985 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:50:25.185 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:50:25.187 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:50:25.212 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:50:25.236 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:50:26.068 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:50:26.080 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:50:26.083 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:50:26.083 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:50:26.087 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:50:26.096 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:50:26.097 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:50:26.098 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:50:26.098 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:50:26.099 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:50:26.099 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:50:26.100 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:50:26.107 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:50:26.108 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:50:26.108 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:50:26.108 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:50:26.109 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:50:26.109 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:50:26.110 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:50:26.110 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:50:26.111 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:50:26.112 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:50:26.113 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:50:26.113 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:50:26.113 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:50:26.114 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:50:26.114 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:50:26.125 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:50:26.130 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:50:26.136 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:50:26.145 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:50:26.145 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:50:26.146 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:50:26.146 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:50:26.147 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:50:26.564 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:50:26.600 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:50:26.955 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:50:27.030 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:50:27.053 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:50:27.054 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:50:27.055 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:50:27.055 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:50:27.063 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.359 seconds (process running for 5.301)
2025-10-22 15:50:42.729 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 15:50:42.730 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 15:50:42.733 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-10-22 15:50:42.969 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.094 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 15:50:43.351 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.364 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:50:43.365 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.371 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:50:43.564 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.583 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:50:43.801 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.809 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:50:43.966 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:50:43.970 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:50:43.984 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - UPDATE TBL_SHORT_URL SET IS_DEL = 'Y', DELETED_AT = CURRENT_TIMESTAMP WHERE id = ?
2025-10-22 15:50:57.413 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:51:03.315 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:51:03.327 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 15:51:03.490 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:03.495 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:51:03.496 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:03.498 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:51:46.466 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=50s351ms).
2025-10-22 15:51:47.132 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:51:47.134 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=6YulgyaU, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2b7afa8e]
2025-10-22 15:51:47.136 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:51:47.138 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 15:51:48.238 [http-nio-8080-exec-5] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 15:51:48.239 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:51:48.248 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id and (su1_0.IS_DEL = 'N') where su1_0.id=?
2025-10-22 15:51:48.351 [http-nio-8080-exec-6] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 15:51:48.352 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:51:49.267 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:51:49.415 [http-nio-8080-exec-7] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:51:49.416 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:51:49.422 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:51:53.336 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:53.522 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:53.526 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:51:53.528 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:53.530 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:51:53.853 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:51:53.858 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:51:54.040 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:52:01.675 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:52:06.338 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:52:06.341 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:52:06.342 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - UPDATE TBL_SHORT_URL SET IS_DEL = 'Y', DELETED_AT = CURRENT_TIMESTAMP WHERE id = ?
2025-10-22 15:52:09.455 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:52:09.919 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:52:10.069 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:52:10.074 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:52:10.076 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:52:10.077 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:52:13.953 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:52:13.955 [http-nio-8080-exec-3] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=5BzFzM6p, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@424d6c3f]
2025-10-22 15:52:13.957 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:52:13.958 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 15:52:14.684 [http-nio-8080-exec-9] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=4
2025-10-22 15:52:14.685 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:52:14.687 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id and (su1_0.IS_DEL = 'N') where su1_0.id=?
2025-10-22 15:52:14.781 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=4, groupBy=[REFERER, YEAR]
2025-10-22 15:52:14.782 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:52:14.784 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:52:14.872 [http-nio-8080-exec-4] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=4, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:52:14.873 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:52:14.874 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:52:44.386 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 15:52:44.392 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 15:52:44.397 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:52:44.398 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:52:44.399 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:52:44.400 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:52:44.402 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 15:52:44.404 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:52:47.111 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:52:47.155 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 26744 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:52:47.155 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:52:47.156 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:52:47.753 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:52:47.821 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 3 JPA repository interfaces.
2025-10-22 15:52:48.080 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:52:48.081 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:52:48.081 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:52:48.081 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:52:48.081 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:52:48.082 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:52:48.082 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:52:48.082 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:52:48.082 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:52:48.082 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:52:48.459 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:52:48.472 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:52:48.474 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:52:48.474 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:52:48.522 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:52:48.522 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1335 ms
2025-10-22 15:52:48.527 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:52:48.535 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:52:48.537 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:52:48.679 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:52:48.736 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:52:48.776 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:52:49.049 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:52:49.073 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:52:49.256 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:52:49.257 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:52:49.281 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:52:49.305 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:52:50.100 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:52:50.112 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:52:50.115 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:52:50.115 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:52:50.118 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:52:50.125 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:52:50.126 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:52:50.127 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:52:50.127 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:52:50.128 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:52:50.128 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:52:50.129 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:52:50.134 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:52:50.134 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:52:50.134 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:52:50.135 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:52:50.135 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:52:50.135 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:52:50.136 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:52:50.136 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:52:50.137 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:52:50.138 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:52:50.138 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:52:50.139 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:52:50.139 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:52:50.139 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:52:50.140 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:52:50.148 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:52:50.152 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:52:50.158 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:52:50.166 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:52:50.166 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:52:50.167 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:52:50.167 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:52:50.168 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:52:50.611 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:52:50.643 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:52:50.995 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:52:51.079 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:52:51.093 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:52:51.094 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:52:51.095 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:52:51.095 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:52:51.095 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:52:51.095 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:52:51.104 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.412 seconds (process running for 5.297)
2025-10-22 15:53:09.684 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 15:53:09.685 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 15:53:09.686 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 15:53:09.917 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:10.044 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 15:53:10.309 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:10.324 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:53:10.326 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:10.334 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:53:10.503 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:10.526 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:53:10.728 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:13.613 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:53:17.681 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where u1_0.id=? and (u1_0.IS_DEL = 'N')
2025-10-22 15:53:21.086 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:53:21.089 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:53:21.098 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - UPDATE TBL_SHORT_URL SET IS_DEL = 'Y', DELETED_AT = CURRENT_TIMESTAMP WHERE id = ?
2025-10-22 15:53:24.549 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:54:01.534 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 15:54:01.544 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 15:54:01.763 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:54:01.770 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 15:54:01.772 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 15:54:01.774 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 15:54:16.473 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:54:16.475 [http-nio-8080-exec-9] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=2tvt9C0C, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@282462ae]
2025-10-22 15:54:16.476 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 15:54:16.480 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 15:54:17.240 [http-nio-8080-exec-3] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 15:54:17.240 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:54:17.247 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id and (su1_0.IS_DEL = 'N') where su1_0.id=?
2025-10-22 15:54:17.345 [http-nio-8080-exec-4] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 15:54:17.346 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:54:18.070 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:54:18.154 [http-nio-8080-exec-5] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 15:54:18.155 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 15:54:18.160 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 15:58:26.490 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 15:58:26.496 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 15:58:26.500 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:58:26.501 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:58:26.503 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:58:26.504 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:58:26.506 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 15:58:26.508 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 15:58:31.963 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 15:58:32.124 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 27190 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 15:58:32.125 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 15:58:32.126 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 15:58:33.398 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 15:58:33.486 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 3 JPA repository interfaces.
2025-10-22 15:58:33.768 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 15:58:33.769 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:58:33.769 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:58:33.769 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:58:33.770 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:58:33.770 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 15:58:33.770 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 15:58:33.771 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:58:33.771 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:58:33.771 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 15:58:34.201 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 15:58:34.213 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 15:58:34.215 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 15:58:34.215 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 15:58:34.263 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 15:58:34.263 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2083 ms
2025-10-22 15:58:34.270 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 15:58:34.278 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 15:58:34.280 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 15:58:34.437 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 15:58:34.495 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 15:58:34.531 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 15:58:34.816 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 15:58:34.843 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 15:58:35.051 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 15:58:35.054 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 15:58:35.083 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 15:58:35.111 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 15:58:36.003 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 15:58:36.017 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 15:58:36.021 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 15:58:36.022 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 15:58:36.027 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 15:58:36.035 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 15:58:36.037 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 15:58:36.037 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 15:58:36.038 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 15:58:36.038 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 15:58:36.039 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 15:58:36.040 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 15:58:36.046 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 15:58:36.046 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 15:58:36.047 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 15:58:36.047 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 15:58:36.048 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 15:58:36.048 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 15:58:36.049 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 15:58:36.049 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 15:58:36.050 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 15:58:36.052 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 15:58:36.052 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 15:58:36.052 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 15:58:36.053 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 15:58:36.053 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 15:58:36.054 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 15:58:36.065 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 15:58:36.070 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 15:58:36.077 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 15:58:36.086 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 15:58:36.086 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 15:58:36.086 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 15:58:36.087 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 15:58:36.088 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 15:58:36.534 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 15:58:36.567 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 15:58:36.911 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 15:58:36.985 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 15:58:37.000 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 15:58:37.001 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 15:58:37.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 15:58:37.002 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 15:58:37.011 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 6.402 seconds (process running for 7.725)
2025-10-22 16:00:37.879 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-22 16:00:37.891 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-22 16:00:37.896 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 16:00:37.897 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 16:00:37.898 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 16:00:37.899 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 16:00:37.902 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-22 16:00:37.904 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-22 16:00:42.518 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-22 16:00:42.563 [main] INFO  com.nh.shorturl.ShortUrlApplication - Starting ShortUrlApplication using Java 17.0.16 with PID 27357 (/Users/kms/dev/short-url/build/classes/java/main started by kms in /Users/kms/dev/short-url)
2025-10-22 16:00:42.564 [main] DEBUG com.nh.shorturl.ShortUrlApplication - Running with Spring Boot v3.5.7-SNAPSHOT, Spring v6.2.12
2025-10-22 16:00:42.565 [main] INFO  com.nh.shorturl.ShortUrlApplication - The following 1 profile is active: "local"
2025-10-22 16:00:43.281 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-22 16:00:43.348 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 3 JPA repository interfaces.
2025-10-22 16:00:43.574 [main] INFO  c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor - Post-processing PropertySource instances
2025-10-22 16:00:43.575 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 16:00:43.575 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 16:00:43.575 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletContextInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 16:00:43.576 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 16:00:43.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper
2025-10-22 16:00:43.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2025-10-22 16:00:43.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 16:00:43.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 16:00:43.577 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource applicationInfo [org.springframework.boot.ApplicationInfoPropertySource] to EncryptableMapPropertySourceWrapper
2025-10-22 16:00:44.041 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-22 16:00:44.052 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-22 16:00:44.053 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-22 16:00:44.054 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-22 16:00:44.099 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-22 16:00:44.099 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1487 ms
2025-10-22 16:00:44.104 [main] INFO  c.u.j.f.DefaultLazyPropertyFilter - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2025-10-22 16:00:44.111 [main] INFO  c.u.j.r.DefaultLazyPropertyResolver - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2025-10-22 16:00:44.113 [main] INFO  c.u.j.d.DefaultLazyPropertyDetector - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2025-10-22 16:00:44.261 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-22 16:00:44.320 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-22 16:00:44.369 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-22 16:00:44.666 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-22 16:00:44.689 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-22 16:00:44.885 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-22 16:00:44.887 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-22 16:00:44.917 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-22 16:00:44.944 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-22 16:00:45.958 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-22 16:00:45.977 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_redirection_history cascade 
2025-10-22 16:00:45.981 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_short_url cascade 
2025-10-22 16:00:45.981 [main] DEBUG org.hibernate.SQL - drop table if exists tbl_user cascade 
2025-10-22 16:00:45.987 [main] DEBUG org.hibernate.SQL - create table tbl_redirection_history (id bigint generated by default as identity, redirect_at timestamp(6), short_url_id bigint not null, ip varchar(255), referer varchar(255), user_agent varchar(255), primary key (id))
2025-10-22 16:00:45.998 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.id is '자동 생성 ID'
2025-10-22 16:00:46.000 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.redirect_at is 'Redirect 일시'
2025-10-22 16:00:46.001 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.short_url_id is 'Short URL ID'
2025-10-22 16:00:46.001 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.ip is 'IP'
2025-10-22 16:00:46.002 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.referer is 'referer'
2025-10-22 16:00:46.003 [main] DEBUG org.hibernate.SQL - comment on column tbl_redirection_history.user_agent is 'userAgent'
2025-10-22 16:00:46.004 [main] DEBUG org.hibernate.SQL - create table tbl_short_url (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), expired_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), user_id bigint not null, short_url varchar(100) not null, long_url varchar(2000) not null, create_by varchar(255), primary key (id), unique (short_url))
2025-10-22 16:00:46.011 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.is_del is '삭제 여부'
2025-10-22 16:00:46.012 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.deleted_at is '삭제일'
2025-10-22 16:00:46.012 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.expired_at is '만료일'
2025-10-22 16:00:46.013 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.id is '자동 생성 ID'
2025-10-22 16:00:46.013 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.user_id is '생성자 User ID'
2025-10-22 16:00:46.014 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.short_url is '단축 URL'
2025-10-22 16:00:46.014 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.long_url is '원본 URL'
2025-10-22 16:00:46.015 [main] DEBUG org.hibernate.SQL - comment on column tbl_short_url.create_by is '생성자'
2025-10-22 16:00:46.016 [main] DEBUG org.hibernate.SQL - create table tbl_user (is_del varchar(1) check (is_del in ('N','Y','N')), created_at timestamp(6) not null, deleted_at timestamp(6), id bigint generated by default as identity, updated_at timestamp(6), api_key varchar(255) not null, username varchar(255) not null, primary key (id), constraint UK_USER_USERNAME_APIKEY unique (username, api_key))
2025-10-22 16:00:46.017 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.is_del is '삭제 여부'
2025-10-22 16:00:46.018 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.deleted_at is '삭제일'
2025-10-22 16:00:46.019 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.id is '자동 생성 ID'
2025-10-22 16:00:46.019 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.api_key is '고객별 발급 API Key'
2025-10-22 16:00:46.019 [main] DEBUG org.hibernate.SQL - comment on column tbl_user.username is '사용자'
2025-10-22 16:00:46.020 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_redirection_history add constraint FK5i482darsqdymvtkxodd7xpsu foreign key (short_url_id) references tbl_short_url
2025-10-22 16:00:46.034 [main] DEBUG org.hibernate.SQL - alter table if exists tbl_short_url add constraint FK195ldnm2klb8amrpp4w92dij7 foreign key (user_id) references tbl_user
2025-10-22 16:00:46.040 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-22 16:00:46.049 [main] INFO  c.u.j.encryptor.DefaultLazyEncryptor - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2025-10-22 16:00:46.060 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.key-obtention-iterations, using default value: 1000
2025-10-22 16:00:46.061 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-name, using default value: null
2025-10-22 16:00:46.062 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.provider-class-name, using default value: null
2025-10-22 16:00:46.062 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.salt-generator-classname, using default value: org.jasypt.salt.RandomSaltGenerator
2025-10-22 16:00:46.063 [main] INFO  c.u.j.c.StringEncryptorBuilder - Encryptor config not found for property jasypt.encryptor.string-output-type, using default value: base64
2025-10-22 16:00:46.539 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-22 16:00:46.691 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-22 16:00:46.909 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-10-22 16:00:46.958 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-22 16:00:46.978 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-22 16:00:46.979 [main] INFO  c.u.j.c.RefreshScopeRefreshedEventListener - Refreshing cached encryptable property sources on ServletWebServerInitializedEvent
2025-10-22 16:00:46.979 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemProperties refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source systemEnvironment refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source random refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application-local.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source Config resource 'class path resource [application.yml]' via location 'optional:classpath:/' refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.c.CachingDelegateEncryptablePropertySource - Property Source applicationInfo refreshed
2025-10-22 16:00:46.980 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource configurationProperties [class org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource
2025-10-22 16:00:46.980 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Skipping PropertySource servletConfigInitParams [class org.springframework.core.env.PropertySource$StubPropertySource
2025-10-22 16:00:46.980 [main] INFO  c.u.j.EncryptablePropertySourceConverter - Converting PropertySource servletContextInitParams [org.springframework.web.context.support.ServletContextPropertySource] to EncryptableEnumerablePropertySourceWrapper
2025-10-22 16:00:46.988 [main] INFO  com.nh.shorturl.ShortUrlApplication - Started ShortUrlApplication in 4.962 seconds (process running for 6.108)
2025-10-22 16:00:53.163 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-22 16:00:53.163 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-22 16:00:53.164 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-22 16:00:53.487 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:53.662 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into tbl_user (api_key,created_at,is_del,deleted_at,updated_at,username,id) values (?,?,?,?,?,?,default)
2025-10-22 16:00:54.692 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:54.717 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 16:00:54.721 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:54.732 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 16:00:55.151 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:55.180 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 16:00:55.377 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:59.618 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 16:00:59.784 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:00:59.790 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 16:00:59.805 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - UPDATE TBL_SHORT_URL SET IS_DEL = 'Y', DELETED_AT = CURRENT_TIMESTAMP WHERE id = ?
2025-10-22 16:01:02.285 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 16:01:08.819 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=? and u1_0.api_key=?
2025-10-22 16:01:08.833 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update tbl_user set api_key=?,is_del=?,deleted_at=?,updated_at=?,username=? where id=?
2025-10-22 16:01:09.169 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:01:09.175 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select su1_0.id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=? fetch first ? rows only
2025-10-22 16:01:09.178 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.api_key,u1_0.created_at,u1_0.is_del,u1_0.deleted_at,u1_0.updated_at,u1_0.username from tbl_user u1_0 where (u1_0.IS_DEL = 'N') and u1_0.username=?
2025-10-22 16:01:09.181 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into tbl_short_url (create_by,created_at,is_del,deleted_at,expired_at,long_url,short_url,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,default)
2025-10-22 16:01:09.440 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 16:01:09.442 [http-nio-8080-exec-9] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - saveRedirectionHistory: shortUrl=2YXciYu5, request=SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@93e2f13]
2025-10-22 16:01:09.445 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where (su1_0.IS_DEL = 'N') and su1_0.short_url=?
2025-10-22 16:01:09.450 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into tbl_redirection_history (ip,redirect_at,referer,short_url_id,user_agent,id) values (?,?,?,?,?,default)
2025-10-22 16:01:10.462 [http-nio-8080-exec-10] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getRedirectCount: shortUrlId=2
2025-10-22 16:01:10.463 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 16:01:10.476 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(rh1_0.id) from tbl_redirection_history rh1_0 left join tbl_short_url su1_0 on su1_0.id=rh1_0.short_url_id and (su1_0.IS_DEL = 'N') where su1_0.id=?
2025-10-22 16:01:10.687 [http-nio-8080-exec-1] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[REFERER, YEAR]
2025-10-22 16:01:10.687 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 16:01:11.495 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select rh1_0.referer,extract(year from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.referer,extract(year from rh1_0.redirect_at) order by count(rh1_0.id) desc
2025-10-22 16:01:11.641 [http-nio-8080-exec-2] INFO  c.n.s.s.i.h.RedirectionHistoryServiceImpl - getStats: shortUrlId=2, groupBy=[USER_AGENT, MONTH, DAY]
2025-10-22 16:01:11.642 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select su1_0.id,su1_0.create_by,su1_0.created_at,su1_0.is_del,su1_0.deleted_at,su1_0.expired_at,su1_0.long_url,su1_0.short_url,su1_0.updated_at,su1_0.user_id from tbl_short_url su1_0 where su1_0.id=? and (su1_0.IS_DEL = 'N')
2025-10-22 16:01:11.650 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at),count(rh1_0.id) from tbl_redirection_history rh1_0 where rh1_0.short_url_id=? group by rh1_0.user_agent,extract(month from rh1_0.redirect_at),extract(day from rh1_0.redirect_at) order by count(rh1_0.id) desc
